Список команд, которые могут понадобиться при выполнении заданий:
```
pwd, cd, mkdir, ls, cat, cp, stat, file, find, alias, bashrc, git, wc, grep, whoami, tar, bash, df, du, less
```

### Вопрос 1
Вы подключились к серверу и находитесь в неизвестной директории. Опишите последовательность команд, чтобы:
- Узнать, где вы находитесь
- Перейти в домашнюю директорию
- Создать структуру папок `projects/website/logs` одной командой
- Проверить, что структура создана
```
pwd
cd
mkdir -p projects/website/logs
find projects/website/logs (if exists, it shows this directory, else "No such file or directory")
```

---

### Вопрос 2
В директории `/var/log` нужно найти все файлы логов за последние 7 дней, которые больше 10MB. Составьте команду `find` с необходимыми опциями.

```
find /var/log -type f -name "*.log" -mtime -7 -size +10M
```
   f - file
   mtime - менее семи дней изменены
   размер больше 10 мегабайт

---

### Вопрос 3
Создайте алиас `ll`, который показывает подробный список файлов включая скрытые. Как сделать так, чтобы этот алиас работал при каждом входе в систему?

1) ```alias ll='ls -la'``` (-l long fomat, -a all (including hidden files))
2) just launch in the terminal: ll                 
3) Чтобы алиас работал при каждом входе в систему, нужно добавить создание алиаса в конфигурационный файл оболочки.
4) ```echo "alias ll='ls -la'" >> ~/.bashrc ```

---

### Вопрос 4
Объясните концепцию stdin, stdout, stderr. Как перенаправить stderr в файл, а stdout вывести на экран? Как перенаправить убрать stderr из вывода команды?

stdin - стандартный ввод cat < file.txt (используется для чтения из файла)
stdout - стандартный вывод ls -l (выводит в консоль)
stderr - стандартный вывод ошибок (в терминал по умолчанию) ls 'несуществующий_файл' выведет ошибку

1)``` ls -l file1.txt file2.txt not_exist.txt 2> errors.log ```- чтобы перенаправить вывод ошибки в файл errors.log  (2 относится к stderr)
2) ```ls -l file.txt 2> /dev/null```

---

### Вопрос 5
Расскажите в общих чертах как устроена файловая система linix. Объясните разницу между абсолютным и относительным путем. Приведите примеры перехода из `/home/user/documents` в `/var/www` используя оба способа.

Все файлы и каталоги начинаются от корня / (корневая директория) 
/home - домашние каталоги пользователей
/etc конфигурационные файлы
/var зименяемые данные(логи и сайты)
/bin (исполняемые файлы)
/dev устройства
всё представлено файлами
hard link, symlink   

Абсолютный vs относительный путь

Абсолютный путь начинается с /. Указывает полный маршрут от корня. 
Относительный путь начинается с текущей директории 
. - текущая директория
.. - родительская 
~ - домашний коталог пользователя 
пример относительного путя: ../projects/script.sh

ПРИМЕР ПЕРЕХОДА `/home/user/documents` -> `/var/www` и:
```cd /var/www``` - абсолютный путь

```сd ../../var/www```
.. - переход из /home/user/documents -> /home/user 
.. - /home/user -> /home
/ver/www - спускаемся куда надо

Абсолютный путь — чёткий и неизменный. Относительный — гибкий, зависит от текущего расположения в дереве файлов.

---

### Вопрос 6
Вопрос по git. У вас есть проект, в котором вы изменили файлы `index.html`, `style.css` и `script.js`.
- Добавьте в stage только `index.html` и `style.css`
- Проверьте статус репозитория
- Сделайте коммит с сообщением
- Посмотрите историю коммитов в одну строку


  ```
  git add index.html style.css
  git status
  git commit -m "HTML and CSS updated"
  git log --oneline
  ```

---

### Вопрос 7
Вы создали новую ветку `feature-login` и сделали в ней 3 коммита. Как:
- Переключиться обратно на ветку `main`
- Влить изменения из `feature-login` в `main`
- Удалить ветку `feature-login` после успешного слияния

```
git checkout main
git merge feature-login
git branch -d feature-login
```
but if the branch was alreade pushed:
```
git push origin --delete feature-login
```
  

---

### Вопрос 8
У вас есть лог-файл `access.log`. Напишите команду, которая:
- Находит все строки, содержащие слово "ERROR"
- Подсчитывает их количество
- Сохраняет результат в файл `error_count.txt`

```
grep -c "ERROR" access.log > error_count.txt
```
-c count lines 

---

### Вопрос 9
Объясните, что делает эта команда:
```bash
cat app_users.txt | sort | uniq -c | sort -nr -k1 | head -10
```

ОТВЕТ:
```
cat <some file> прочтение файла 
sort - сортировка строк в алфавитном порядке
uniq -c  - удаляет дубликаты, добавляя счетчик повторений
sort -nr -k1 - сортирвока результатов {
   -n числовая сортировка
   -r reversed (по убыванию)
   -k1 - по первому полю (счетчику)
}
head -10 - первые 10 строк
```
---

### Вопрос 10
Напишите конвеер команд (pipeline), который:
1. Выведет список всех файлов в текущей директории
2. Оставит только строки, содержащие `.log`
3. Отсортирует по имени
4. Выведет первые 5 результатов

```
ls | grep "\.log" | sort | head -5"

ls - файлы в текущей директории (ls -1 по одному на строку для красоты)
grep "\.log" - \ - экранирование точки (чтобы это был не любой символ, а именно точка!)
sort - сортирует в алф. порядке
head -5 первые пять результатов
```
   

---

### Вопрос 11
В чем разница между:
- `command > file.txt`
- `command >> file.txt`
- `command 2> error.txt`
- `command &> all.txt`

Приведите примеры использования каждого варианта.

1) '>' перенаправление stdout (перезапись файла)
2) '>>' дописывает в конец файла
3) 2> перезаписывает файл ошибками, если есть
4) &>  перенаправление stdout and stderr вместе (перезаписись файла)

Пример 1:
```
ls -la > file.txt   //перезапись
echo "Null" > file.txt //перезапись
```

Пример 2:

```
echo "$(date): today" >> file.txt     //Sat Dec  6 03:19:22 PM MSK 2025: today
who >> file.txt //Sat Dec  6 03:19:22 PM MSK 2025: today
```

Пример 3:
```
grep "pattern" nonexistent.txt 2> errors.log
// grep: nonexist.txt: No such file or directory

rm /root/file 2> permission_errors.txt
// rm: cannot remove '/root/file': Permission denied
```

Пример 4:
```
./script.sh &> output.log
// Все сообщения скрипта (и обычные, и ошибки) в output.log

make build &> build.log
// Весь вывод компиляции в один лог-файл
```

---

### Вопрос 12
Объясните вывод команды `ls -l`:
```bash
-rw-r--r-- 1 alice alice 2048 Jan 15 10:30 config.txt
drwxr-xr-x 3 bob   root 4096 Jan 14 15:20 logs
```
ОТВЕТ:
```
-rw-r--r--- права доступа:
- обычный файл
rw- права владельца r (read) and w(write) (could be also x, испольнение)
r-- права группы: чтение
r-- права остальных: чтение
1 кол-во жестких ссылок
alice - владелец файла, группа-владелец
2048 - размер файла в байтах
Jan 15 10:30 дата последнего редактирования
config.txt имя файла
```

```
drwxr-xr-x - права доступа:
d - директория
rwx - владелец
r-x - группа
r-x - остальные
3 - количество жестких ссылок
bob - владелец
root - группа-владелец
4096 размер в байтах
```

---

### Вопрос 13
Вам нужно создать скрипт `backup.sh`, который:
- Может исполнять только владелец
- Может читать группа и другие пользователи
- Никто кроме владельца не может изменять
- Выводит имя пользователя, который запустил скрипт

  ```
  nano backup.sh
  chmod 744 backup.sh
  // если надо сделать владельцем себя: chown $USER:$USER backup.sh
  ./backup.sh
  ```

  ```
  #!/bin/bash

   if [ ! -x "$0" ]; then  
           echo "Error: you have not any permissions to this file"
           exit 1
   fi 

   echo "The script was launched by: $(whoami)"
   ```
---

### Вопрос 14
Как узнать:
- К каким группам принадлежит текущий пользователь?
```
groups
```
- Какой UID у пользователя `www-data`?
```
id -u www-data
```
- Кто является владельцем файла `/etc/passwd`?
```
ls -l /etc/passwd
```

---

### Вопрос 15
Ваше приложение `app.py` зависло и не отвечает на запросы. Опишите последовательность действий:
- Как найти PID этого процесса?
```
ps aux | grep app.py
```
- Как "сказать" процессу, чтобы он завершился?
```
kill Proccess_ID
```
- Если не помогло ипроцесс не хочет завершаться, как принудительно убить его
```
kill -KILL Proccess_ID
```

---

### Вопрос 16
Объясните вывод команды `top`:
```
load average: 2.50, 1.80, 1.20
```

*Load average показывает сколько процессов в среднем ожидают выполнения на CPU (стоят в очереди) за последние 1, 5 и 15 минут.*
- CPU = Central Processing Unit = Центральный процессор = "Мозг" компьютера.

---

### Вопрос 17
Создайте сжатый архив всех `.log` файлов из директории `/var/log/app` и сохраните его как `logs_backup.tar.gz`. Затем выведите список файлов в архиве без распаковки.

```
tar -czf logs_backip.tar.gz -C /var/log/app ./*.log
# 1. Создаём сжатый архив

ls -lh logs_backup.tar.gz
# 2. Проверяем создание

tar -tzf logs_backup.tar.gz
# 3. Выводим список файлов в архиве без распаковки
```

---

### Вопрос 18
Объясните вывод `df -h`:
```
Filesystem      Size  Used Avail Use% Mounted on
/dev/sda1        50G   45G    5G  90% /
```
```
/dev/sba1 - первый раздел на первом жёстком диске
size - общий размер раздела
used - сколько занято
avail -  свободно
use%  процент использования (90% - заполнен на 90%)
mounted on - точка монтирования (/ корневая директория (системный диск))
```
```
/dev/sdb1       100G   20G   80G  20% /data
```
```
/dev/sbb1 - первый раздел на втором жёстком диске
mounted on - точка монтирования (/data отдельный раздел для данных)
```

---

### Вопрос 19
Напишите простой скрипт, который:
- Принимает имя файла как аргумент
- Проверяет, существует ли файл
- Если существует, выводит "File exists", если нет - "File not found"

```
#!/bin/sh

if [ $# -eq 0 ]; then
    echo "Ошибка: Укажите имя файла как аргумент"
    echo "Использование: $0 <имя_файла>"
    exit 1
fi

filename="$1"

if [ -e "$filename" ]; then
    echo "File exists"
else
    echo "File not found"
fi
```

```
chmod +x simple.sh
```
```
./simple.sh file.txt
```
---

### Вопрос 20
Объясните разницу между одинарными и двойными квадратными скобками в bash:
```bash
if [ -f file.txt ]
if [[ -f file.txt ]]
```


- [] - это команда test - команда для проверки условий
```
test -f file.txt
[ -f file.txt ]
```
- [] работают везде, но вокруг переменных надо ставить кавычки (без них могут быть ошибки)
```
if [ "$filename" = "test.txt" ]; then
```
- [[]] - новый удобный способ писать условия, но работает только в bash (в sh не поддерживается)
```
if [[ $filename = "test.txt" ]]; then  
```

---

### Вопрос 21
Напишите скрипт, который перебирает все `.txt` файлы в текущей директории и выводит размер каждого файла.

```
#!/bin/bash

echo "Txt files sizes:"

for file in *.txt; do
        if [[ -f "$file" ]]; then
                size=$(stat -c%s "$file" 2>/dev/null || wc -c < "$file" 2>/dev/null)
                printf "%-30s %10d bytes\n" "$file" "$size"
        fi
done
```

OUTPUT:
```
Txt files sizes:
error_count.txt                         2 bytes
file.txt                              181 bytes
permission.txt                         50 bytes
```

---

### Вопрос 22
Вы работаете инженером в крупной компании. Вам пришло уведомление (алерт), что на одном из ваших хостов остановлен сервис `nginx`:
- Посмотрите статус сервиса
```
sudo systemctl status nginx 
```
- Запустите его, если он остановлен
```
sudo systemctl start nginx
```
- Добавьте его в автозагрузку через systemctl
```
sudo systemctl enable nginx
```
- Перезапустите сервис
```
sudo systemctl restart nginx
```

---

### Вопрос 23
Диск заполнен на 95%. Опишите последовательность команд для диагностики:
- Как найти самые большие директории?
```
du -sh * | sort -hr                 # you can add "| head -10" to show the 10 biggest ones
```
- Как найти файлы больше 100MB?
```
find , -type f -size +100M
```

---

### Вопрос 24
Приложение не стартует. В логах ошибка "Permission denied". Придумайте как можно больше гипотез о причинах такого поведения.

---

### Вопрос 25
В чем разница между жесткой (hardlink) и символической (symlink) ссылкой? Приведите примеры использования каждой. Что такое иноды (inode)?
